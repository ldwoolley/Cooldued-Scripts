import subprocess

users_actual = []

users_authorized = ["root", "daemon", "bin", "sys", "sync", "games", "man", "lp", "mail", "news", "uucp", "proxy", "www-data", "backup", "list", "irc", "gnats", "nobody", "systemd-timesync", "systemd-network", "systemd-resolve", "systemd-bus-proxy", "syslog", "_apt", "messagebus", "uuidd", "lightdm", "whoopsie", "avahi-autoipd", "avahi", "dnsmasq", "colord", "speech-dispatcher", "hplip", "kernoops", "pulse", "rtkit", "saned", "usbmux", "guest-lncgoz"]

users_actual = subprocess.Popen(["cut -d: -f1 /etc/passwd"], shell=True, stdout=subprocess.PIPE).stdout
users_actual.read().splitlines()
for user in users_actual:
  user.replace('b-', '')

print(users_actual)


users_total = input('How many users do you have: ')


for i in range(0, int(users_total)):
  
  user_name = input('What is the name of user {}: '.format(i))
  users_authorized.append(user_name)

for user in users_authorized:
  if user not in users_actual:
    add_user = input('Would you like to add the user {} becuase they are not currently on this system (y, n): '.format(user))
    if add_user == 'y':
      subprocess.call('adduser {}'.format(user))

for user in users_actual:
  if user not in users_authorized:
    remove_user = input('Would you like to remove the user {} because they are currently on this system even though they should not (y, n): '.format(user))
    if remove_user == 'y':
      subprocess.call('deluser {}'.format(user))
      
print('Thank you for using this script.')
print('This was made with the help of Jeremy, Ethan, Lance, and stack over flow.')
print('Have a good day.')
